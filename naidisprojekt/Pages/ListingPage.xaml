<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="naidisprojekt.Pages.ListingPage"
             xmlns:converters="clr-namespace:naidisprojekt.Converters"
             Title="ListingPage"
             BackgroundColor="#F3F4F6">
    <ContentPage.Resources>
        <ResourceDictionary>
            <converters:ByteToImageConverter x:Key="ByteToImageConverter"/>
        </ResourceDictionary>
    </ContentPage.Resources>

    <Grid RowDefinitions="1.5*,*">

        <Border Grid.Row="0"
                BackgroundColor="White"
                StrokeThickness="0">
            <Image Source="{Binding ListingImage, Converter={StaticResource ByteToImageConverter}}"
                   Aspect="AspectFill"/>
        </Border>

        <Border Grid.Row="1"
                BackgroundColor="White"
                StrokeThickness="0"
                Margin="0,-30,0,0"
                Padding="24,30,24,24">
            <Border.StrokeShape>
                <RoundRectangle CornerRadius="20,20,0,0"/>
            </Border.StrokeShape>

            <Grid RowDefinitions="*,Auto">

                <VerticalStackLayout Grid.Row="0" Spacing="16">

                    <Label Text="{Binding ListingName}" 
                           FontSize="28" 
                           FontAttributes="Bold"
                           TextColor="#111827"
                           LineBreakMode="WordWrap"/>

                    <Label Text="{Binding Price, StringFormat='$ {0}'}" 
                           FontSize="24" 
                           FontAttributes="Bold"
                           TextColor="#374151"/>

                    <Label Text="{Binding ListingDescription}" 
                           FontSize="16" 
                           TextColor="#6B7280"
                           LineBreakMode="WordWrap"
                           Margin="0,8,0,0"/>

                </VerticalStackLayout>

                <Grid Grid.Row="1" 
                      ColumnDefinitions="Auto,*"
                      ColumnSpacing="16"
                      Margin="0,24,0,0">

                    <Border Grid.Column="0"
                            BackgroundColor="#F3F4F6"
                            StrokeThickness="0"
                            HeightRequest="56"
                            WidthRequest="56">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="12"/>
                        </Border.StrokeShape>
                        <ImageButton x:Name="FavoriteButton" 
                                     Clicked="FavoriteButton_Clicked" 
                                     Source="favoritesiconnotselected.png" 
                                     BackgroundColor="Transparent"
                                     Aspect="AspectFit"/>
                    </Border>

                    <Border Grid.Column="1"
                            BackgroundColor="#4F46E5"
                            StrokeThickness="0"
                            HeightRequest="56">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="12"/>
                        </Border.StrokeShape>
                        <Button Text="Contact Seller" 
                                BackgroundColor="Transparent"
                                TextColor="White"
                                FontSize="16"
                                FontAttributes="Bold"/>
                    </Border>

                </Grid>

            </Grid>

        </Border>

    </Grid>
</ContentPage>